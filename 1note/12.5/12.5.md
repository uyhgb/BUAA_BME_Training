昨天在IMU上烧录了新代码，通过json格式发送数据，代码位于sensor_source_code\9DOF_Demo_v2

接下来需要将IMU数据接入ROS系统，作为一个节点发布出来

关于现在使用了的宇树功能包的功能，似乎只用到了lowstate消息

砍掉宇树功能包，自定义ROS系统
现在的东西git push为backup_12.5分支


——》重构后的代码


TODO:IMU采样频率太低，首先要改成事件驱动，然后arduino发送频率配置改高，100Hz，另外，能不能直接IMU输出二进制


# Timeout检查echo
timeout 5 ros2 topic echo /imu/data --field linear_acceleration

# IMU检查
root@docker-desktop:/workspace# cd /workspace/robot_ws && source /opt/ros/humble/setup.bash && python3 scripts/imu_health_check.py
[INFO] [1764925364.597953680] [imu_health_checker]: ============================================================
[INFO] [1764925364.626128365] [imu_health_checker]: IMU 健康检查工具已启动
[INFO] [1764925364.654809996] [imu_health_checker]: 请确保 IMU 静止放置在水平桌面上...
[INFO] [1764925364.671882620] [imu_health_checker]: 将收集 100 个样本进行分析...
[INFO] [1764925364.689051123] [imu_health_checker]: ============================================================
[INFO] [1764925367.646533603] [imu_health_checker]: 已收集 20/100 个样本...
[INFO] [1764925370.826051938] [imu_health_checker]: 已收集 40/100 个样本...
[INFO] [1764925374.008772592] [imu_health_checker]: 已收集 60/100 个样本...
[INFO] [1764925377.185050482] [imu_health_checker]: 已收集 80/100 个样本...
[INFO] [1764925378.513678427] [imu_health_checker]: 已收集 100/100 个样本...
[INFO] [1764925378.532583554] [imu_health_checker]: 
[INFO] [1764925378.548824033] [imu_health_checker]: ============================================================
[INFO] [1764925378.567520059] [imu_health_checker]: 数据收集完成,开始分析...
[INFO] [1764925378.587548102] [imu_health_checker]: ============================================================
[INFO] [1764925378.609366564] [imu_health_checker]: 
[INFO] [1764925378.629761594] [imu_health_checker]: 【采样率】
[INFO] [1764925378.652640515] [imu_health_checker]:   实际采样率: 7.16 Hz
[INFO] [1764925378.673376491] [imu_health_checker]:   ⚠️  采样率偏低 (期望 20 Hz)
[INFO] [1764925378.692131532] [imu_health_checker]: 
[INFO] [1764925378.712044862] [imu_health_checker]: 【加速度分析】(单位: m/s²)
[INFO] [1764925378.738103803] [imu_health_checker]:   均值: X=  37.70, Y= -15.82, Z= 956.22
[INFO] [1764925378.759454479] [imu_health_checker]:   标准差: X=   2.57, Y=   1.60, Z=   2.80
[INFO] [1764925378.780236519] [imu_health_checker]:   合加速度: 957.09 m/s² (理想值: 9.81 m/s²)
[WARN] [1764925378.801311063] [imu_health_checker]:   ⚠️  Z轴加速度异常! 误差: 946.41 m/s²
[WARN] [1764925378.822619095] [imu_health_checker]:       请检查: 1) IMU是否水平放置  2) 加速度单位是否为 m/s²
[INFO] [1764925378.843042704] [imu_health_checker]:   ✓ X/Y轴噪声在正常范围
[INFO] [1764925378.861645423] [imu_health_checker]: 
[INFO] [1764925378.881598374] [imu_health_checker]: 【角速度分析】(单位: rad/s)
[INFO] [1764925378.904424564] [imu_health_checker]:   均值: X=-0.1956, Y= 0.1363, Z= 0.3463
[INFO] [1764925378.925620536] [imu_health_checker]:   标准差: X= 0.2133, Y= 0.2153, Z= 0.1470
[INFO] [1764925378.947499268] [imu_health_checker]:   最大值: X= 0.9750, Y= 0.6775, Z= 0.6525
[WARN] [1764925378.970034351] [imu_health_checker]:   ⚠️  陀螺仪零偏较大!
[WARN] [1764925378.989739921] [imu_health_checker]:       建议进行陀螺仪校准
[INFO] [1764925379.007702193] [imu_health_checker]:   ✓ 角速度稳定性良好
[INFO] [1764925379.025602733] [imu_health_checker]: 
[INFO] [1764925379.044502127] [imu_health_checker]: 【姿态分析】
[INFO] [1764925379.065284890] [imu_health_checker]:   Roll:  均值=  -0.99°, 标准差=0.028°
[INFO] [1764925379.082290508] [imu_health_checker]:   Pitch: 均值=  -2.22°, 标准差=0.057°
[INFO] [1764925379.099399267] [imu_health_checker]:   Yaw:   均值=  21.03°, 标准差=0.457°
[INFO] [1764925379.121152377] [imu_health_checker]:   ✓ IMU 放置水平
[INFO] [1764925379.142124748] [imu_health_checker]:   ✓ 姿态稳定
[INFO] [1764925379.160914969] [imu_health_checker]: 
[INFO] [1764925379.179113450] [imu_health_checker]: ============================================================
[INFO] [1764925379.199775247] [imu_health_checker]: 【综合评估】
[ERROR] [1764925379.220680896] [imu_health_checker]:   发现 1 个严重问题:
[ERROR] [1764925379.238018761] [imu_health_checker]:     - 重力加速度异常
[WARN] [1764925379.256155605] [imu_health_checker]:   发现 2 个警告:
[WARN] [1764925379.274245976] [imu_health_checker]:     - 采样率偏低
[WARN] [1764925379.295731102] [imu_health_checker]:     - 陀螺仪零偏较大
[INFO] [1764925379.315346113] [imu_health_checker]: ============================================================
[INFO] [1764925379.336166034] [imu_health_checker]: 检查完成,节点将在 3 秒后退出...
^Croot@docker-desktop:/workspace/robot_ws# 